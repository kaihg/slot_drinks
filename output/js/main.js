var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var App;
(function (App) {
    var Constants = /** @class */ (function () {
        function Constants() {
        }
        Constants.SYMBOL_WIDTH = 200;
        Constants.SYMBOL_HEIGHT = 100;
        return Constants;
    }());
    App.Constants = Constants;
})(App || (App = {}));
var App;
(function (App) {
    var Main = /** @class */ (function () {
        function Main() {
            this.initPIXI();
            this.startLoading();
        }
        Main.prototype.initPIXI = function () {
            this.app = new PIXI.Application(window.innerWidth, window.innerHeight, { backgroundColor: 0x1099bb });
            document.body.appendChild(this.app.view);
            if (window.addEventListener) {
                window.addEventListener("resize", this.onResize.bind(this), true);
            }
        };
        Main.prototype.onResize = function () {
            this.app.renderer.resize(window.innerWidth, window.innerHeight);
            if (window.innerWidth < 2.5 * App.Constants.SYMBOL_WIDTH) {
                // 切直
                this.reelView.x = this.app.screen.width / 2;
                this.reelView.y = this.app.screen.height / 2 - 200;
                this.goodReelView.x = this.app.screen.width / 2;
                this.goodReelView.y = this.app.screen.height / 2;
            }
            else {
                // 切橫
                this.reelView.x = this.app.screen.width / 2 - 125;
                this.reelView.y = this.app.screen.height / 2;
                this.goodReelView.x = this.app.screen.width / 2 + 125;
                this.goodReelView.y = this.app.screen.height / 2;
            }
            this.spinBtn.x = this.app.screen.width / 2;
            this.spinBtn.y = this.goodReelView.y + App.Constants.SYMBOL_HEIGHT;
        };
        Main.prototype.startLoading = function () {
            var _this = this;
            var loadingView = new view.LoadingView();
            loadingView.x = this.app.screen.width / 2;
            loadingView.y = this.app.screen.height / 2;
            this.app.stage.addChild(loadingView);
            PIXI.loader
                .on("progress", function (loader, resource) { loadingView.updateProgress(loader.progress); })
                .add("shops", "resource/shops.json")
                .load(function () {
                loadingView.parent.removeChild(loadingView);
                _this.onLoaded();
            });
        };
        Main.prototype.onLoaded = function () {
            this.initReelView(PIXI.loader.resources.shops.data);
            this.initSpinButton();
            this.onResize();
        };
        Main.prototype.initReelView = function (shops) {
            console.log(shops);
            var reel = new view.ReelView(shops.normal);
            var text1 = new PIXI.Text("普通");
            text1.anchor.set(0.5);
            text1.y = -75;
            reel.addChild(text1);
            this.app.stage.addChild(reel);
            this.reelView = reel;
            // 老闆的
            var reel2 = new view.ReelView(shops.good);
            var text2 = new PIXI.Text("爽");
            text2.anchor.set(0.5);
            text2.y = -75;
            reel2.addChild(text2);
            this.app.stage.addChild(reel2);
            this.goodReelView = reel2;
        };
        Main.prototype.initSpinButton = function () {
            var btn = new view.Button("開始");
            btn.anchor.set(0.5);
            btn.x = this.reelView.x;
            btn.y = this.reelView.y + App.Constants.SYMBOL_HEIGHT;
            btn.buttonWidth = App.Constants.SYMBOL_WIDTH;
            btn.buttonHeight = 55;
            // btn.x = this.app.screen.width - 64;
            // btn.y = this.app.screen.height - 48;
            btn.interactive = true;
            btn.on('pointerup', this.spin.bind(this));
            this.spinBtn = btn;
            this.app.stage.addChild(btn);
            // let testBtn = new view.Button();
            // testBtn.buttonWidth = App.Constants.SYMBOL_WIDTH;
            // testBtn.buttonHeight = 75;
            // // testBtn.redraw();
            // testBtn.x = this.reelView.x;
            // testBtn.y = this.reelView.y + App.Constants.SYMBOL_HEIGHT *2;
            // this.app.stage.addChild(testBtn);
        };
        Main.prototype.spin = function () {
            this.reelView.onSpin();
            this.goodReelView.onSpin();
        };
        return Main;
    }());
    App.Main = Main;
})(App || (App = {}));
var view;
(function (view) {
    var HoverType;
    (function (HoverType) {
        HoverType[HoverType["type1"] = 0] = "type1";
    })(HoverType = view.HoverType || (view.HoverType = {}));
    var ButtonHoverEffect = /** @class */ (function () {
        function ButtonHoverEffect() {
        }
        ButtonHoverEffect.onHover = function (type, tweenObj, isOverIn) {
            switch (type) {
                case HoverType.type1:
                    ButtonHoverEffect.alphaVisible(tweenObj, isOverIn);
                    break;
            }
        };
        ButtonHoverEffect.alphaVisible = function (tweenObj, isOverIn) {
            var sec = 0.5;
            TweenLite.killTweensOf(tweenObj);
            if (isOverIn) {
                TweenLite.to(tweenObj, sec, { alpha: 1 });
            }
            else {
                TweenLite.to(tweenObj, sec, { alpha: 0, onComplete: function () { tweenObj.visible = false; } });
            }
        };
        return ButtonHoverEffect;
    }());
    view.ButtonHoverEffect = ButtonHoverEffect;
})(view || (view = {}));
var view;
(function (view) {
    var Button = /** @class */ (function (_super) {
        __extends(Button, _super);
        function Button(text) {
            if (text === void 0) { text = "Button"; }
            var _this = _super.call(this) || this;
            _this.hoverType = view.HoverType.type1;
            _this.frameColor = 0xffffff;
            _this.bgColor = 0x0011ff;
            _this.bgColorOnClick = 0x33aaaa;
            _this.bgView = new PIXI.Graphics();
            _this.effect = new PIXI.Sprite(PIXI.Texture.WHITE);
            _this.effect.anchor.set(0.5);
            _this.effect.visible = false;
            _this.effect.alpha = 0;
            _this.label = new PIXI.Text(text, { fill: _this.frameColor });
            _this.label.anchor.set(0.5);
            _this.addChild(_this.bgView, _this.effect, _this.label);
            _this.drawNormalSytle();
            // set interactive
            _this.interactive = true;
            _this.buttonMode = true;
            _this.on("pointerover", _this.onButtonOver);
            _this.on("pointerout", _this.onButtonOut);
            _this.on("pointerdown", function () { _this.effect.tint = _this.bgColorOnClick; });
            _this.on("pointerup", function () { _this.effect.tint = _this.frameColor; });
            return _this;
        }
        Button.prototype.drawNormalSytle = function () {
            // let width = this.width;
            // let height = this.height;
            var padding = 10;
            var width = this._buttonWidth || this.label.width + padding;
            var height = this._buttonHeight || this.label.height + padding;
            // let startX =  -width * 0.5;
            // let startY = -height * 0.5;
            var startX = -width * 0.5;
            var startY = -height * 0.5;
            var graph = this.bgView;
            graph.clear();
            graph.beginFill(this.bgColor);
            // graph.drawRect(startX,startY,width,height);
            // graph.endFill();
            graph.lineStyle(5, this.frameColor);
            graph.moveTo(startX, startY);
            graph.lineTo(startX + width, startY);
            graph.lineTo(startX + width, startY + height);
            graph.lineTo(startX, startY + height);
            graph.lineTo(startX, startY);
            graph.endFill();
        };
        Object.defineProperty(Button.prototype, "buttonWidth", {
            set: function (width) {
                this._buttonWidth = Math.max(width, this.label.width);
                this.redraw();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Button.prototype, "buttonHeight", {
            set: function (height) {
                this._buttonHeight = Math.max(height, this.label.height);
                this.redraw();
            },
            enumerable: true,
            configurable: true
        });
        Button.prototype.redraw = function () {
            this.drawNormalSytle();
        };
        Button.prototype.onButtonOver = function () {
            this.effect.width = this._buttonWidth;
            this.effect.height = this._buttonHeight;
            this.effect.visible = true;
            this.effect.tint = this.frameColor;
            view.ButtonHoverEffect.onHover(this.hoverType, this.effect, true);
            this.label.style.fill = this.bgColor;
        };
        Button.prototype.onButtonOut = function () {
            view.ButtonHoverEffect.onHover(this.hoverType, this.effect, false);
            this.label.style.fill = this.frameColor;
        };
        return Button;
    }(PIXI.Sprite));
    view.Button = Button;
})(view || (view = {}));
var view;
(function (view) {
    var LoadingView = /** @class */ (function (_super) {
        __extends(LoadingView, _super);
        function LoadingView() {
            var _this = _super.call(this) || this;
            _this.progress = 0;
            _this.color = 0xaabc13;
            return _this;
        }
        LoadingView.prototype.updateProgress = function (p) {
            var percent = p;
            this.progress = percent;
            this.clear();
            this.lineStyle(10, this.color);
            // this.drawCircle(0, 0, 2 * Math.PI * percent);
            this.arc(0, 0, 50, 0, 2 * Math.PI * percent);
            this.endFill();
        };
        return LoadingView;
    }(PIXI.Graphics));
    view.LoadingView = LoadingView;
})(view || (view = {}));
var view;
(function (view) {
    var ReelView = /** @class */ (function (_super) {
        __extends(ReelView, _super);
        // private _mask: PIXI.DisplayObject;
        function ReelView(shops) {
            var _this = _super.call(this) || this;
            _this.tempIds = [0, 1, 2];
            _this.shops = shops;
            var width = App.Constants.SYMBOL_WIDTH;
            var height = App.Constants.SYMBOL_HEIGHT;
            _this.frame = new PIXI.Graphics();
            _this.frame.lineStyle(10, 0x000000);
            _this.frame.drawRect(-width * 0.5, -height * 0.5, width, height);
            _this.frame.endFill();
            // mask
            var mask = new PIXI.Graphics();
            mask.beginFill(0xFFFFFF);
            mask.drawRect(-width * 0.5, -height * 0.5, width, height);
            mask.endFill();
            // wheel
            var wheel = new view.WheelView(shops);
            wheel.mask = mask;
            wheel.setIds(_this.tempIds);
            _this.wheel = wheel;
            _this.addChild(wheel, mask, _this.frame);
            _this.updateShop(_this.tempIds);
            return _this;
        }
        ReelView.prototype.updateShop = function (shopId) {
            this.wheel.setIds(shopId);
        };
        ReelView.prototype.onSpin = function () {
            if (this.spining) {
                return;
            }
            this.spining = true;
            var dampingStartSec = 0.5;
            TweenMax.to(this.wheel.position, dampingStartSec, { y: -40, yoyo: true, repeat: 1 });
            TweenMax.fromTo(this.wheel.position, 0.2, { y: 0 }, { delay: dampingStartSec * 2, y: App.Constants.SYMBOL_HEIGHT, repeat: 10, ease: Linear.easeNone, onRepeat: this.swapId, onRepeatScope: this, onComplete: this.onSpinComplete, onCompleteScope: this });
        };
        ReelView.prototype.randomId = function () {
            return Math.floor(Math.random() * this.shops.length);
        };
        ReelView.prototype.swapId = function () {
            this.tempIds.unshift(this.randomId());
            this.updateShop(this.tempIds);
        };
        ReelView.prototype.onSpinComplete = function () {
            this.spining = false;
            this.tempIds.unshift(this.randomId());
            this.tempIds.unshift(this.randomId());
            this.updateShop(this.tempIds);
            TweenLite.fromTo(this.wheel.position, 1, { y: -App.Constants.SYMBOL_HEIGHT }, { y: 0, ease: Back.easeOut });
        };
        return ReelView;
    }(PIXI.Sprite));
    view.ReelView = ReelView;
})(view || (view = {}));
var view;
(function (view) {
    var WheelView = /** @class */ (function (_super) {
        __extends(WheelView, _super);
        function WheelView(shops) {
            var _this = _super.call(this, PIXI.Texture.EMPTY) || this;
            _this.shops = shops;
            for (var i = 0; i < 3; i++) {
                var symbolText = new PIXI.Text("", { fill: "0x000000" });
                symbolText.anchor.set(0.5);
                var bg = new PIXI.Sprite(PIXI.Texture.WHITE);
                bg.width = App.Constants.SYMBOL_WIDTH;
                bg.height = App.Constants.SYMBOL_HEIGHT;
                bg.anchor.set(0.5);
                var container = new PIXI.Container();
                container.addChild(bg, symbolText);
                container.y = (i - 1) * App.Constants.SYMBOL_HEIGHT;
                _this.addChild(container);
            }
            return _this;
        }
        WheelView.prototype.setIds = function (ids) {
            var _this = this;
            this.children.forEach(function (child, i) {
                var textView = child.getChildAt(1);
                textView.text = _this.shops[ids[i]];
            });
        };
        return WheelView;
    }(PIXI.Sprite));
    view.WheelView = WheelView;
})(view || (view = {}));
var vo;
(function (vo) {
    var ShopsVO = /** @class */ (function () {
        function ShopsVO() {
        }
        return ShopsVO;
    }());
    vo.ShopsVO = ShopsVO;
})(vo || (vo = {}));

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9Db25zdGFudHMudHMiLCJzcmMvTWFpbi50cyIsInNyYy9lZmZlY3QvQnV0dG9uSG92ZXJFZmZlY3QudHMiLCJzcmMvdmlldy9CdXR0b24udHMiLCJzcmMvdmlldy9Mb2FkaW5nVmlldy50cyIsInNyYy92aWV3L1JlZWxWaWV3LnRzIiwic3JjL3ZpZXcvV2hlZWxWaWV3LnRzIiwic3JjL3ZvL1Nob3BzVk8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLElBQU8sR0FBRyxDQUtUO0FBTEQsV0FBTyxHQUFHO0lBQ047UUFBQTtRQUdBLENBQUM7UUFGaUIsc0JBQVksR0FBRyxHQUFHLENBQUM7UUFDbkIsdUJBQWEsR0FBRyxHQUFHLENBQUM7UUFDdEMsZ0JBQUM7S0FIRCxBQUdDLElBQUE7SUFIWSxhQUFTLFlBR3JCLENBQUE7QUFDTCxDQUFDLEVBTE0sR0FBRyxLQUFILEdBQUcsUUFLVDtBQ0xELElBQU8sR0FBRyxDQWtJVDtBQWxJRCxXQUFPLEdBQUc7SUFDTjtRQVFJO1lBRUksSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ2hCLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUV4QixDQUFDO1FBRU8sdUJBQVEsR0FBaEI7WUFDSSxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxXQUFXLEVBQUUsRUFBRSxlQUFlLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQztZQUN0RyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3pDLElBQUksTUFBTSxDQUFDLGdCQUFnQixFQUFFO2dCQUN6QixNQUFNLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO2FBQ3JFO1FBQ0wsQ0FBQztRQUVELHVCQUFRLEdBQVI7WUFDSSxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7WUFFaEUsSUFBSSxNQUFNLENBQUMsVUFBVSxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsU0FBUyxDQUFDLFlBQVksRUFBRTtnQkFDdEQsS0FBSztnQkFDTCxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO2dCQUM1QyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztnQkFFbkQsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztnQkFDaEQsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQzthQUNwRDtpQkFBTTtnQkFDSCxLQUFLO2dCQUNMLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDO2dCQUNsRCxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2dCQUU3QyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQztnQkFDdEQsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsSUFB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QUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDO2dCQUVwRCxLQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQzVCOztRQUNMLENBQUM7UUFFRCwwQkFBTSxHQUFOLFVBQU8sR0FBYTtZQUFwQixpQkFLQztZQUpHLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQUMsS0FBcUIsRUFBRSxDQUFDO2dCQUMzQyxJQUFJLFFBQVEsR0FBRyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBYyxDQUFDO2dCQUNoRCxRQUFRLENBQUMsSUFBSSxHQUFHLEtBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkMsQ0FBQyxDQUFDLENBQUE7UUFDTixDQUFDO1FBRUwsZ0JBQUM7SUFBRCxDQWpDQSxBQWlDQyxDQWpDOEIsSUFBSSxDQUFDLE1BQU0sR0FpQ3pDO0lBakNZLGNBQVMsWUFpQ3JCLENBQUE7QUFDTCxDQUFDLEVBbkNNLElBQUksS0FBSixJQUFJLFFBbUNWO0FDbkNELElBQU8sRUFBRSxDQUtSO0FBTEQsV0FBTyxFQUFFO0lBQ0w7UUFBQTtRQUdBLENBQUM7UUFBRCxjQUFDO0lBQUQsQ0FIQSxBQUdDLElBQUE7SUFIWSxVQUFPLFVBR25CLENBQUE7QUFDTCxDQUFDLEVBTE0sRUFBRSxLQUFGLEVBQUUsUUFLUiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlIEFwcCB7XG4gICAgZXhwb3J0IGNsYXNzIENvbnN0YW50cyB7XG4gICAgICAgIHB1YmxpYyBzdGF0aWMgU1lNQk9MX1dJRFRIID0gMjAwO1xuICAgICAgICBwdWJsaWMgc3RhdGljIFNZTUJPTF9IRUlHSFQgPSAxMDA7XG4gICAgfVxufSIsIm1vZHVsZSBBcHAge1xuICAgIGV4cG9ydCBjbGFzcyBNYWluIHtcblxuICAgICAgICBwcml2YXRlIGFwcDogUElYSS5BcHBsaWNhdGlvbjtcblxuICAgICAgICBwcml2YXRlIHJlZWxWaWV3OiB2aWV3LlJlZWxWaWV3O1xuICAgICAgICBwcml2YXRlIGdvb2RSZWVsVmlldzogdmlldy5SZWVsVmlldztcbiAgICAgICAgcHJpdmF0ZSBzcGluQnRuOiBQSVhJLkRpc3BsYXlPYmplY3Q7XG5cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdFBJWEkoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRMb2FkaW5nKCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgaW5pdFBJWEkoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcCA9IG5ldyBQSVhJLkFwcGxpY2F0aW9uKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQsIHsgYmFja2dyb3VuZENvbG9yOiAweDEwOTliYiB9KTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5hcHAudmlldyk7XG4gICAgICAgICAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm9uUmVzaXplLmJpbmQodGhpcyksIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgb25SZXNpemUoKSB7XG4gICAgICAgICAgICB0aGlzLmFwcC5yZW5kZXJlci5yZXNpemUod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG5cbiAgICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IDIuNSAqIEFwcC5Db25zdGFudHMuU1lNQk9MX1dJRFRIKSB7XG4gICAgICAgICAgICAgICAgLy8g5YiH55u0XG4gICAgICAgICAgICAgICAgdGhpcy5yZWVsVmlldy54ID0gdGhpcy5hcHAuc2NyZWVuLndpZHRoIC8gMjtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZWxWaWV3LnkgPSB0aGlzLmFwcC5zY3JlZW4uaGVpZ2h0IC8gMiAtIDIwMDtcblxuICAgICAgICAgICAgICAgIHRoaXMuZ29vZFJlZWxWaWV3LnggPSB0aGlzLmFwcC5zY3JlZW4ud2lkdGggLyAyO1xuICAgICAgICAgICAgICAgIHRoaXMuZ29vZFJlZWxWaWV3LnkgPSB0aGlzLmFwcC5zY3JlZW4uaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8g5YiH5qmrXG4gICAgICAgICAgICAgICAgdGhpcy5yZWVsVmlldy54ID0gdGhpcy5hcHAuc2NyZWVuLndpZHRoIC8gMiAtIDEyNTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlZWxWaWV3LnkgPSB0aGlzLmFwcC5zY3JlZW4uaGVpZ2h0IC8gMjtcblxuICAgICAgICAgICAgICAgIHRoaXMuZ29vZFJlZWxWaWV3LnggPSB0aGlzLmFwcC5zY3JlZW4ud2lkdGggLyAyICsgMTI1O1xuICAgICAgICAgICAgICAgIHRoaXMuZ29vZFJlZWxWaWV3LnkgPSB0aGlzLmFwcC5zY3JlZW4uaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zcGluQnRuLnggPSB0aGlzLmFwcC5zY3JlZW4ud2lkdGggLyAyO1xuICAgICAgICAgICAgdGhpcy5zcGluQnRuLnkgPSB0aGlzLmdvb2RSZWVsVmlldy55ICsgQXBwLkNvbnN0YW50cy5TWU1CT0xfSEVJR0hUO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhcnRMb2FkaW5nKCk6IGFueSB7XG4gICAgICAgICAgICBsZXQgbG9hZGluZ1ZpZXcgPSBuZXcgdmlldy5Mb2FkaW5nVmlldygpO1xuICAgICAgICAgICAgbG9hZGluZ1ZpZXcueCA9IHRoaXMuYXBwLnNjcmVlbi53aWR0aCAvIDI7XG4gICAgICAgICAgICBsb2FkaW5nVmlldy55ID0gdGhpcy5hcHAuc2NyZWVuLmhlaWdodCAvIDI7XG5cbiAgICAgICAgICAgIHRoaXMuYXBwLnN0YWdlLmFkZENoaWxkKGxvYWRpbmdWaWV3KTtcblxuICAgICAgICAgICAgUElYSS5sb2FkZXJcbiAgICAgICAgICAgICAgICAub24oXCJwcm9ncmVzc1wiLCAobG9hZGVyOiBQSVhJLmxvYWRlcnMuTG9hZGVyLCByZXNvdXJjZTogUElYSS5sb2FkZXJzLlJlc291cmNlKSA9PiB7IGxvYWRpbmdWaWV3LnVwZGF0ZVByb2dyZXNzKGxvYWRlci5wcm9ncmVzcykgfSlcbiAgICAgICAgICAgICAgICAuYWRkKFwic2hvcHNcIiwgXCJyZXNvdXJjZS9zaG9wcy5qc29uXCIpXG4gICAgICAgICAgICAgICAgLmxvYWQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nVmlldy5wYXJlbnQucmVtb3ZlQ2hpbGQobG9hZGluZ1ZpZXcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uTG9hZGVkKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIG9uTG9hZGVkKCkge1xuICAgICAgICAgICAgdGhpcy5pbml0UmVlbFZpZXcoUElYSS5sb2FkZXIucmVzb3VyY2VzLnNob3BzLmRhdGEpO1xuICAgICAgICAgICAgdGhpcy5pbml0U3BpbkJ1dHRvbigpO1xuICAgICAgICAgICAgdGhpcy5vblJlc2l6ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5pdFJlZWxWaWV3KHNob3BzOiB2by5TaG9wc1ZPKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzaG9wcyk7XG4gICAgICAgICAgICBsZXQgcmVlbCA9IG5ldyB2aWV3LlJlZWxWaWV3KHNob3BzLm5vcm1hbCk7XG5cbiAgICAgICAgICAgIGxldCB0ZXh0MSA9IG5ldyBQSVhJLlRleHQoXCLmma7pgJpcIilcbiAgICAgICAgICAgIHRleHQxLmFuY2hvci5zZXQoMC41KTtcbiAgICAgICAgICAgIHRleHQxLnkgPSAtNzU7XG4gICAgICAgICAgICByZWVsLmFkZENoaWxkKHRleHQxKTtcblxuICAgICAgICAgICAgdGhpcy5hcHAuc3RhZ2UuYWRkQ2hpbGQocmVlbCk7XG5cbiAgICAgICAgICAgIHRoaXMucmVlbFZpZXcgPSByZWVsO1xuXG5cbiAgICAgICAgICAgIC8vIOiAgemXhueahFxuICAgICAgICAgICAgbGV0IHJlZWwyID0gbmV3IHZpZXcuUmVlbFZpZXcoc2hvcHMuZ29vZCk7XG4gICAgICAgICAgICBsZXQgdGV4dDIgPSBuZXcgUElYSS5UZXh0KFwi54i9XCIpXG4gICAgICAgICAgICB0ZXh0Mi5hbmNob3Iuc2V0KDAuNSk7XG4gICAgICAgICAgICB0ZXh0Mi55ID0gLTc1O1xuICAgICAgICAgICAgcmVlbDIuYWRkQ2hpbGQodGV4dDIpO1xuXG4gICAgICAgICAgICB0aGlzLmFwcC5zdGFnZS5hZGRDaGlsZChyZWVsMik7XG5cbiAgICAgICAgICAgIHRoaXMuZ29vZFJlZWxWaWV3ID0gcmVlbDI7XG4gICAgICAgIH1cblxuICAgICAgICBpbml0U3BpbkJ1dHRvbigpIHtcbiAgICAgICAgICAgIGxldCBidG4gPSBuZXcgdmlldy5CdXR0b24oXCLplovlp4tcIik7XG4gICAgICAgICAgICBidG4uYW5jaG9yLnNldCgwLjUpO1xuICAgICAgICAgICAgYnRuLnggPSB0aGlzLnJlZWxWaWV3Lng7XG4gICAgICAgICAgICBidG4ueSA9IHRoaXMucmVlbFZpZXcueSArIEFwcC5Db25zdGFudHMuU1lNQk9MX0hFSUdIVDtcbiAgICAgICAgICAgIGJ0bi5idXR0b25XaWR0aCA9IEFwcC5Db25zdGFudHMuU1lNQk9MX1dJRFRIO1xuICAgICAgICAgICAgYnRuLmJ1dHRvbkhlaWdodCA9IDU1O1xuICAgICAgICAgICAgLy8gYnRuLnggPSB0aGlzLmFwcC5zY3JlZW4ud2lkdGggLSA2NDtcbiAgICAgICAgICAgIC8vIGJ0bi55ID0gdGhpcy5hcHAuc2NyZWVuLmhlaWdodCAtIDQ4O1xuICAgICAgICAgICAgYnRuLmludGVyYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIGJ0bi5vbigncG9pbnRlcnVwJywgdGhpcy5zcGluLmJpbmQodGhpcykpO1xuXG4gICAgICAgICAgICB0aGlzLnNwaW5CdG4gPSBidG47XG5cbiAgICAgICAgICAgIHRoaXMuYXBwLnN0YWdlLmFkZENoaWxkKGJ0bik7XG5cblxuICAgICAgICAgICAgLy8gbGV0IHRlc3RCdG4gPSBuZXcgdmlldy5CdXR0b24oKTtcbiAgICAgICAgICAgIC8vIHRlc3RCdG4uYnV0dG9uV2lkdGggPSBBcHAuQ29uc3RhbnRzLlNZTUJPTF9XSURUSDtcbiAgICAgICAgICAgIC8vIHRlc3RCdG4uYnV0dG9uSGVpZ2h0ID0gNzU7XG4gICAgICAgICAgICAvLyAvLyB0ZXN0QnRuLnJlZHJhdygpO1xuXG4gICAgICAgICAgICAvLyB0ZXN0QnRuLnggPSB0aGlzLnJlZWxWaWV3Lng7XG4gICAgICAgICAgICAvLyB0ZXN0QnRuLnkgPSB0aGlzLnJlZWxWaWV3LnkgKyBBcHAuQ29uc3RhbnRzLlNZTUJPTF9IRUlHSFQgKjI7XG4gICAgICAgICAgICAvLyB0aGlzLmFwcC5zdGFnZS5hZGRDaGlsZCh0ZXN0QnRuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNwaW4oKSB7XG4gICAgICAgICAgICB0aGlzLnJlZWxWaWV3Lm9uU3BpbigpO1xuICAgICAgICAgICAgdGhpcy5nb29kUmVlbFZpZXcub25TcGluKCk7XG4gICAgICAgIH1cblxuXG4gICAgfVxufVxuIiwibW9kdWxlIHZpZXcge1xuICAgIGV4cG9ydCBlbnVtIEhvdmVyVHlwZSB7XG4gICAgICAgIHR5cGUxXG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIEJ1dHRvbkhvdmVyRWZmZWN0IHtcblxuICAgICAgICBwdWJsaWMgc3RhdGljIG9uSG92ZXIodHlwZTogSG92ZXJUeXBlLCB0d2Vlbk9iajogUElYSS5EaXNwbGF5T2JqZWN0LCBpc092ZXJJbjogYm9vbGVhbikge1xuXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIEhvdmVyVHlwZS50eXBlMTpcbiAgICAgICAgICAgICAgICAgICAgQnV0dG9uSG92ZXJFZmZlY3QuYWxwaGFWaXNpYmxlKHR3ZWVuT2JqLCBpc092ZXJJbik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG5cbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgYWxwaGFWaXNpYmxlKHR3ZWVuT2JqOiBQSVhJLkRpc3BsYXlPYmplY3QsIGlzT3ZlckluOiBib29sZWFuKSB7XG4gICAgICAgICAgICBsZXQgc2VjID0gMC41O1xuICAgICAgICAgICAgVHdlZW5MaXRlLmtpbGxUd2VlbnNPZih0d2Vlbk9iaik7XG5cbiAgICAgICAgICAgIGlmIChpc092ZXJJbikge1xuICAgICAgICAgICAgICAgIFR3ZWVuTGl0ZS50byh0d2Vlbk9iaiwgc2VjLCB7IGFscGhhOiAxIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBUd2VlbkxpdGUudG8odHdlZW5PYmosIHNlYywgeyBhbHBoYTogMCwgb25Db21wbGV0ZTogKCkgPT4geyB0d2Vlbk9iai52aXNpYmxlID0gZmFsc2UgfSB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9XG59IiwibW9kdWxlIHZpZXcge1xuXG4gICAgZXhwb3J0IGNsYXNzIEJ1dHRvbiBleHRlbmRzIFBJWEkuU3ByaXRlIHtcblxuICAgICAgICBob3ZlclR5cGU6IEhvdmVyVHlwZSA9IEhvdmVyVHlwZS50eXBlMTtcblxuXG4gICAgICAgIGZyYW1lQ29sb3IgPSAweGZmZmZmZjtcbiAgICAgICAgYmdDb2xvciA9IDB4MDAxMWZmO1xuICAgICAgICBiZ0NvbG9yT25DbGljayA9IDB4MzNhYWFhO1xuXG4gICAgICAgIGxhYmVsOiBQSVhJLlRleHQ7XG4gICAgICAgIHByaXZhdGUgYmdWaWV3OiBQSVhJLkdyYXBoaWNzO1xuXG4gICAgICAgIHByaXZhdGUgX2J1dHRvbldpZHRoOiBudW1iZXI7XG4gICAgICAgIHByaXZhdGUgX2J1dHRvbkhlaWdodDogbnVtYmVyO1xuXG4gICAgICAgIHByaXZhdGUgZWZmZWN0OiBQSVhJLlNwcml0ZTtcblxuICAgICAgICBjb25zdHJ1Y3Rvcih0ZXh0ID0gXCJCdXR0b25cIikge1xuICAgICAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICAgICAgdGhpcy5iZ1ZpZXcgPSBuZXcgUElYSS5HcmFwaGljcygpO1xuXG4gICAgICAgICAgICB0aGlzLmVmZmVjdCA9IG5ldyBQSVhJLlNwcml0ZShQSVhJLlRleHR1cmUuV0hJVEUpO1xuICAgICAgICAgICAgdGhpcy5lZmZlY3QuYW5jaG9yLnNldCgwLjUpO1xuICAgICAgICAgICAgdGhpcy5lZmZlY3QudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5lZmZlY3QuYWxwaGEgPSAwO1xuXG4gICAgICAgICAgICB0aGlzLmxhYmVsID0gbmV3IFBJWEkuVGV4dCh0ZXh0LCB7IGZpbGw6IHRoaXMuZnJhbWVDb2xvciB9KTtcbiAgICAgICAgICAgIHRoaXMubGFiZWwuYW5jaG9yLnNldCgwLjUpO1xuXG4gICAgICAgICAgICB0aGlzLmFkZENoaWxkKHRoaXMuYmdWaWV3LCB0aGlzLmVmZmVjdCwgdGhpcy5sYWJlbCk7XG5cbiAgICAgICAgICAgIHRoaXMuZHJhd05vcm1hbFN5dGxlKCk7XG5cbiAgICAgICAgICAgIC8vIHNldCBpbnRlcmFjdGl2ZVxuICAgICAgICAgICAgdGhpcy5pbnRlcmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmJ1dHRvbk1vZGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5vbihcInBvaW50ZXJvdmVyXCIsIHRoaXMub25CdXR0b25PdmVyKTtcbiAgICAgICAgICAgIHRoaXMub24oXCJwb2ludGVyb3V0XCIsIHRoaXMub25CdXR0b25PdXQpO1xuICAgICAgICAgICAgdGhpcy5vbihcInBvaW50ZXJkb3duXCIsKCk9Pnt0aGlzLmVmZmVjdC50aW50ID0gdGhpcy5iZ0NvbG9yT25DbGlja30pO1xuICAgICAgICAgICAgdGhpcy5vbihcInBvaW50ZXJ1cFwiLCgpPT57dGhpcy5lZmZlY3QudGludCA9IHRoaXMuZnJhbWVDb2xvcn0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZHJhd05vcm1hbFN5dGxlKCkge1xuICAgICAgICAgICAgLy8gbGV0IHdpZHRoID0gdGhpcy53aWR0aDtcbiAgICAgICAgICAgIC8vIGxldCBoZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICAgICAgICAgIGxldCBwYWRkaW5nID0gMTA7XG4gICAgICAgICAgICBsZXQgd2lkdGggPSB0aGlzLl9idXR0b25XaWR0aCB8fCB0aGlzLmxhYmVsLndpZHRoICsgcGFkZGluZztcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSB0aGlzLl9idXR0b25IZWlnaHQgfHwgdGhpcy5sYWJlbC5oZWlnaHQgKyBwYWRkaW5nO1xuXG4gICAgICAgICAgICAvLyBsZXQgc3RhcnRYID0gIC13aWR0aCAqIDAuNTtcbiAgICAgICAgICAgIC8vIGxldCBzdGFydFkgPSAtaGVpZ2h0ICogMC41O1xuICAgICAgICAgICAgbGV0IHN0YXJ0WCA9IC13aWR0aCAqIDAuNTtcbiAgICAgICAgICAgIGxldCBzdGFydFkgPSAtaGVpZ2h0ICogMC41O1xuXG4gICAgICAgICAgICBsZXQgZ3JhcGggPSB0aGlzLmJnVmlldztcbiAgICAgICAgICAgIGdyYXBoLmNsZWFyKCk7XG4gICAgICAgICAgICBncmFwaC5iZWdpbkZpbGwodGhpcy5iZ0NvbG9yKTtcbiAgICAgICAgICAgIC8vIGdyYXBoLmRyYXdSZWN0KHN0YXJ0WCxzdGFydFksd2lkdGgsaGVpZ2h0KTtcbiAgICAgICAgICAgIC8vIGdyYXBoLmVuZEZpbGwoKTtcblxuICAgICAgICAgICAgZ3JhcGgubGluZVN0eWxlKDUsIHRoaXMuZnJhbWVDb2xvcik7XG5cbiAgICAgICAgICAgIGdyYXBoLm1vdmVUbyhzdGFydFgsIHN0YXJ0WSk7XG4gICAgICAgICAgICBncmFwaC5saW5lVG8oc3RhcnRYICsgd2lkdGgsIHN0YXJ0WSk7XG4gICAgICAgICAgICBncmFwaC5saW5lVG8oc3RhcnRYICsgd2lkdGgsIHN0YXJ0WSArIGhlaWdodCk7XG4gICAgICAgICAgICBncmFwaC5saW5lVG8oc3RhcnRYLCBzdGFydFkgKyBoZWlnaHQpO1xuICAgICAgICAgICAgZ3JhcGgubGluZVRvKHN0YXJ0WCwgc3RhcnRZKTtcblxuICAgICAgICAgICAgZ3JhcGguZW5kRmlsbCgpO1xuXG5cbiAgICAgICAgfVxuXG4gICAgICAgIHNldCBidXR0b25XaWR0aCh3aWR0aDogbnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25XaWR0aCA9IE1hdGgubWF4KHdpZHRoLCB0aGlzLmxhYmVsLndpZHRoKTtcbiAgICAgICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXQgYnV0dG9uSGVpZ2h0KGhlaWdodDogbnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25IZWlnaHQgPSBNYXRoLm1heChoZWlnaHQsIHRoaXMubGFiZWwuaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMucmVkcmF3KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZWRyYXcoKSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdOb3JtYWxTeXRsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgb25CdXR0b25PdmVyKCkge1xuICAgICAgICAgICAgdGhpcy5lZmZlY3Qud2lkdGggPSB0aGlzLl9idXR0b25XaWR0aDtcbiAgICAgICAgICAgIHRoaXMuZWZmZWN0LmhlaWdodCA9IHRoaXMuX2J1dHRvbkhlaWdodDtcblxuICAgICAgICAgICAgdGhpcy5lZmZlY3QudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmVmZmVjdC50aW50ID0gdGhpcy5mcmFtZUNvbG9yO1xuXG5cbiAgICAgICAgICAgIEJ1dHRvbkhvdmVyRWZmZWN0Lm9uSG92ZXIodGhpcy5ob3ZlclR5cGUsdGhpcy5lZmZlY3QsdHJ1ZSk7XG5cbiAgICAgICAgICAgIHRoaXMubGFiZWwuc3R5bGUuZmlsbCA9IHRoaXMuYmdDb2xvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIG9uQnV0dG9uT3V0KCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBCdXR0b25Ib3ZlckVmZmVjdC5vbkhvdmVyKHRoaXMuaG92ZXJUeXBlLHRoaXMuZWZmZWN0LGZhbHNlKTtcblxuICAgICAgICAgICAgdGhpcy5sYWJlbC5zdHlsZS5maWxsID0gdGhpcy5mcmFtZUNvbG9yO1xuICAgICAgICB9XG4gICAgfVxufSIsIm1vZHVsZSB2aWV3IHtcbiAgICBleHBvcnQgY2xhc3MgTG9hZGluZ1ZpZXcgZXh0ZW5kcyBQSVhJLkdyYXBoaWNzIHtcblxuICAgICAgICBwcml2YXRlIHByb2dyZXNzOiBudW1iZXIgPSAwO1xuICAgICAgICBjb2xvcjogbnVtYmVyID0gMHhhYWJjMTNcblxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgdXBkYXRlUHJvZ3Jlc3MocDogbnVtYmVyKSB7XG4gICAgICAgICAgICBsZXQgcGVyY2VudCA9IHA7XG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gcGVyY2VudDtcblxuICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5saW5lU3R5bGUoMTAsIHRoaXMuY29sb3IpO1xuICAgICAgICAgICAgLy8gdGhpcy5kcmF3Q2lyY2xlKDAsIDAsIDIgKiBNYXRoLlBJICogcGVyY2VudCk7XG4gICAgICAgICAgICB0aGlzLmFyYygwLCAwLCA1MCwgMCwgMiAqIE1hdGguUEkgKiBwZXJjZW50KTtcbiAgICAgICAgICAgIHRoaXMuZW5kRmlsbCgpO1xuICAgICAgICB9XG5cbiAgICB9XG59XG4iLCJtb2R1bGUgdmlldyB7XG4gICAgZXhwb3J0IGNsYXNzIFJlZWxWaWV3IGV4dGVuZHMgUElYSS5TcHJpdGUge1xuXG4gICAgICAgIHByaXZhdGUgZnJhbWU6IFBJWEkuR3JhcGhpY3M7XG4gICAgICAgIHByaXZhdGUgd2hlZWw6IHZpZXcuV2hlZWxWaWV3O1xuICAgICAgICBwcml2YXRlIHNob3BzOiBzdHJpbmdbXTtcblxuICAgICAgICBwcml2YXRlIHRlbXBJZHM6IG51bWJlcltdID0gWzAsIDEsIDJdO1xuICAgICAgICBzcGluaW5nOiBib29sZWFuO1xuICAgICAgICAvLyBwcml2YXRlIF9tYXNrOiBQSVhJLkRpc3BsYXlPYmplY3Q7XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc2hvcHM6IHN0cmluZ1tdKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgdGhpcy5zaG9wcyA9IHNob3BzO1xuXG4gICAgICAgICAgICBsZXQgd2lkdGggPSBBcHAuQ29uc3RhbnRzLlNZTUJPTF9XSURUSDtcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSBBcHAuQ29uc3RhbnRzLlNZTUJPTF9IRUlHSFQ7XG5cbiAgICAgICAgICAgIHRoaXMuZnJhbWUgPSBuZXcgUElYSS5HcmFwaGljcygpO1xuICAgICAgICAgICAgdGhpcy5mcmFtZS5saW5lU3R5bGUoMTAsIDB4MDAwMDAwKTtcbiAgICAgICAgICAgIHRoaXMuZnJhbWUuZHJhd1JlY3QoLXdpZHRoICogMC41LCAtaGVpZ2h0ICogMC41LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuZnJhbWUuZW5kRmlsbCgpO1xuXG4gICAgICAgICAgICAvLyBtYXNrXG4gICAgICAgICAgICBsZXQgbWFzayA9IG5ldyBQSVhJLkdyYXBoaWNzKCk7XG4gICAgICAgICAgICBtYXNrLmJlZ2luRmlsbCgweEZGRkZGRik7XG4gICAgICAgICAgICBtYXNrLmRyYXdSZWN0KC13aWR0aCAqIDAuNSwgLWhlaWdodCAqIDAuNSwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICBtYXNrLmVuZEZpbGwoKTtcblxuXG4gICAgICAgICAgICAvLyB3aGVlbFxuICAgICAgICAgICAgbGV0IHdoZWVsID0gbmV3IHZpZXcuV2hlZWxWaWV3KHNob3BzKTtcbiAgICAgICAgICAgIHdoZWVsLm1hc2sgPSBtYXNrO1xuICAgICAgICAgICAgd2hlZWwuc2V0SWRzKHRoaXMudGVtcElkcyk7XG4gICAgICAgICAgICB0aGlzLndoZWVsID0gd2hlZWw7XG5cblxuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZCh3aGVlbCwgbWFzaywgdGhpcy5mcmFtZSk7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2hvcCh0aGlzLnRlbXBJZHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlU2hvcChzaG9wSWQ6IG51bWJlcltdKSB7XG4gICAgICAgICAgICB0aGlzLndoZWVsLnNldElkcyhzaG9wSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgb25TcGluKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3BpbmluZykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3BpbmluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIGxldCBkYW1waW5nU3RhcnRTZWMgPSAwLjU7XG4gICAgICAgICAgICBUd2Vlbk1heC50byh0aGlzLndoZWVsLnBvc2l0aW9uLCBkYW1waW5nU3RhcnRTZWMsIHsgeTogLTQwLCB5b3lvOiB0cnVlLCByZXBlYXQ6IDEgfSk7XG4gICAgICAgICAgICBUd2Vlbk1heC5mcm9tVG8odGhpcy53aGVlbC5wb3NpdGlvbiwgMC4yLCB7IHk6IDAgfSwgeyBkZWxheTogZGFtcGluZ1N0YXJ0U2VjICogMiwgeTogQXBwLkNvbnN0YW50cy5TWU1CT0xfSEVJR0hULCByZXBlYXQ6IDEwLCBlYXNlOiBMaW5lYXIuZWFzZU5vbmUsIG9uUmVwZWF0OiB0aGlzLnN3YXBJZCwgb25SZXBlYXRTY29wZTogdGhpcywgb25Db21wbGV0ZTogdGhpcy5vblNwaW5Db21wbGV0ZSwgb25Db21wbGV0ZVNjb3BlOiB0aGlzIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICByYW5kb21JZCgpOiBudW1iZXIge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMuc2hvcHMubGVuZ3RoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3YXBJZCgpIHtcbiAgICAgICAgICAgIHRoaXMudGVtcElkcy51bnNoaWZ0KHRoaXMucmFuZG9tSWQoKSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNob3AodGhpcy50ZW1wSWRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9uU3BpbkNvbXBsZXRlKCkge1xuXG4gICAgICAgICAgICB0aGlzLnNwaW5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudGVtcElkcy51bnNoaWZ0KHRoaXMucmFuZG9tSWQoKSk7XG4gICAgICAgICAgICB0aGlzLnRlbXBJZHMudW5zaGlmdCh0aGlzLnJhbmRvbUlkKCkpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTaG9wKHRoaXMudGVtcElkcyk7XG5cbiAgICAgICAgICAgIFR3ZWVuTGl0ZS5mcm9tVG8odGhpcy53aGVlbC5wb3NpdGlvbiwgMSwgeyB5OiAtQXBwLkNvbnN0YW50cy5TWU1CT0xfSEVJR0hUIH0sIHsgeTogMCwgZWFzZTogQmFjay5lYXNlT3V0IH0pO1xuICAgICAgICB9XG4gICAgfVxufSIsIm1vZHVsZSB2aWV3IHtcbiAgICBleHBvcnQgY2xhc3MgV2hlZWxWaWV3IGV4dGVuZHMgUElYSS5TcHJpdGUge1xuXG4gICAgICAgIHByaXZhdGUgc2hvcHM6IHN0cmluZ1tdO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3BzOiBzdHJpbmdbXSkge1xuICAgICAgICAgICAgc3VwZXIoUElYSS5UZXh0dXJlLkVNUFRZKTtcbiAgICAgICAgICAgIHRoaXMuc2hvcHMgPSBzaG9wcztcblxuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBzeW1ib2xUZXh0ID0gbmV3IFBJWEkuVGV4dChcIlwiLCB7IGZpbGw6IFwiMHgwMDAwMDBcIiB9KTtcbiAgICAgICAgICAgICAgICBzeW1ib2xUZXh0LmFuY2hvci5zZXQoMC41KTtcblxuICAgICAgICAgICAgICAgIGxldCBiZyA9IG5ldyBQSVhJLlNwcml0ZShQSVhJLlRleHR1cmUuV0hJVEUpO1xuICAgICAgICAgICAgICAgIGJnLndpZHRoID0gQXBwLkNvbnN0YW50cy5TWU1CT0xfV0lEVEg7XG4gICAgICAgICAgICAgICAgYmcuaGVpZ2h0ID0gQXBwLkNvbnN0YW50cy5TWU1CT0xfSEVJR0hUO1xuICAgICAgICAgICAgICAgIGJnLmFuY2hvci5zZXQoMC41KTtcblxuICAgICAgICAgICAgICAgIGxldCBjb250YWluZXIgPSBuZXcgUElYSS5Db250YWluZXIoKTtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2hpbGQoYmcsIHN5bWJvbFRleHQpO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci55ID0gKGkgLSAxKSAqIEFwcC5Db25zdGFudHMuU1lNQk9MX0hFSUdIVDtcblxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ2hpbGQoY29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNldElkcyhpZHM6IG51bWJlcltdKSB7XG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkOiBQSVhJLkNvbnRhaW5lciwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0VmlldyA9IGNoaWxkLmdldENoaWxkQXQoMSkgYXMgUElYSS5UZXh0O1xuICAgICAgICAgICAgICAgIHRleHRWaWV3LnRleHQgPSB0aGlzLnNob3BzW2lkc1tpXV07XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICB9XG59IiwibW9kdWxlIHZve1xuICAgIGV4cG9ydCBjbGFzcyBTaG9wc1ZPe1xuICAgICAgICBwdWJsaWMgbm9ybWFsOnN0cmluZ1tdO1xuICAgICAgICBwdWJsaWMgZ29vZDpzdHJpbmdbXTtcbiAgICB9XG59Il19
